<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>2048</title>
	</head>
	<body>
	<canvas id="canvas" width="400" height="400"></canvas>
		<script type="text/javascript">
		var a=0,b=0,q=0,w=0;

			var img = new Image()
			img.src = "img2048/2.png";
			var img1 = new Image()
			img1.src = "img2048/4.png";
		var canvas = document.getElementById('canvas');
				var ctx = canvas.getContext('2d');
				var arra =[];
				var arrb =[];

				function matrixArray(rows,columns){
				  var arr = new Array();
				  for(var x=0; x<columns; x++){
				    arr[x] = new Array();
				    for(var y=0; y<rows; y++){
				      arr[x][y] = 0;
				    }
				  }
				  return arr;
					myMatrix = matrixArray(4,4);
				}
				var myMatrix = matrixArray(4,4);



				function random() {
				
					x=Math.round(Math.random()*(3-0)+0);
					y=Math.round(Math.random()*(3-0)+0);
					if (myMatrix[x][y]==0){

					}
					else {
						
							random()
						
					}
					}
				






				function drawImage(){
					for(i=0;i!=arra.length;i++){
				ctx.drawImage(img,arra[i],arrb[i],99,99);}
				
				}
				
				
				function drawImage1(){
					for(i=0;i!=arra.length;i++){
					ctx.clearRect(0, 0, 400, 400);
					draw()
				img1.src = "img2048/4.png";
				ctx.drawImage(img1,arra[i],arrb[i],99,99);
				}}
				
				
				function add() {
					for(i=0;i!=2;i++){
				if ((arra[i]==arra[i+1])&&(arrb[i]==arrb[i+1]))
				{
					ctx.clearRect(0, 0, 400, 400);
					draw()
					
					ctx.drawImage(img1,arra[i],arrb[i],99,99);
				}}
			}


			function draw(x,y) {



				ctx.fillStyle = '#CFCFCF';
				ctx.fillRect(0,0,400,400);

					for(x=0;x!=400;x+=100) {

						for(y=0;y!=400;y+=100) {


							ctx.strokeStyle = '#000000';
							ctx.strokeRect(x,y,100,100);


						}
					}


			}


			function drawImg(f) {
				for (var i=0;i!=f;i++){
					random();
				if (myMatrix[x][y]!=0){
				}
				else
				{
					myMatrix[x][y]=2;
					x=x*100;
					y=y*100;
				arra.push(x);
				arrb.push(y);
				
				ctx.drawImage(img, arra[i], arrb[i], 99, 99);
				
			}} 
			}
			draw()
			drawImg(2)




			function moveUp(e){
					function moveup() {
					switch(e.keyCode){
					case 38:
					ctx.clearRect(0, 0, 400, 400);
					for (i=0;i!=2;i++){
					if ((arrb[i]>0)) {
					arrb[i]-=20;
					
				}}
					draw();
					var o = 1;
					
					drawImage();
					
					if ((arra[i]==arra[i+1])&&(arrb[i]==arrb[i+1]))
				{
					
					
					add()
					
					}
					
				}
				}

									var IntervalID = setInterval(moveup, 1000/60);
									function stop() {

												clearInterval(IntervalID);
											}

							setTimeout(stop, 500);
							setTimeout(add, 501);
							matrixArray(4,4);

				}









			function moveDown(e){
				function movedwn() {
				switch(e.keyCode){
				case 40:
					ctx.clearRect(0, 0, 400, 400);

					for (i=0;i!=2;i++){
					if ((arrb[i]<300)) {
					arrb[i]+=20;
				}}
				draw()
				
					drawImage();
					
					if ((arra[i]==arra[i+1])&&(arrb[i]==arrb[i+1]))
				{
					
					
					add()
					
					}
					


					}
					}

				var IntervalID = setInterval(movedwn, 1000/60);
				function stop() {

							clearInterval(IntervalID);
						}
			setTimeout(stop, 500)
			setTimeout(add, 501)
			matrixArray(4,4);
			}







			function moveRight(e){
				function mover() {
				switch(e.keyCode){
				case 39:
				ctx.clearRect(0, 0, 400, 400);
				for (i=0;i!=2;i++){
				if ((arra[i]<300)) {
				arra[i]+=20;
			}}


				draw();
				
					drawImage();
					
					if ((arra[i]==arra[i+1])&&(arrb[i]==arrb[i+1]))
				{
					
					
					add()
					
					}
					


			}
			}

							var IntervalID = setInterval(mover, 1000/60);
							function stop() {

										clearInterval(IntervalID);
									}
						setTimeout(stop, 500)
						setTimeout(add, 501)
						matrixArray(4,4);
			}






			function moveLeft(e){
			function movel() {
				switch(e.keyCode){
				case 37:
								ctx.clearRect(0, 0, 400, 400);
								for (i=0;i!=2;i++){
								if ((arra[i]>0)) {
								arra[i]-=20;
							}}
							draw();
						
					drawImage();
					
					if ((arra[i]==arra[i+1])&&(arrb[i]==arrb[i+1]))
				{
					
					
					add()
					
					}
					



			}
			}
								var IntervalID = setInterval(movel, 1000/60);
								function stop() {

											clearInterval(IntervalID);
										}
						setTimeout(stop, 500)
						setTimeout(add, 501)
						matrixArray(4,4);

				}

			addEventListener("keydown", moveLeft);
			addEventListener("keydown", moveRight);
			addEventListener("keydown", moveDown);
			addEventListener("keydown", moveUp);
		</script>
	</body>
</html>
